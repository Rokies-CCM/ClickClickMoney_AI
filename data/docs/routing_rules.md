---
title: 모델 라우팅 규칙(요약)
version: 1.4
last_updated: 2025-10-19
locale: ko-KR
---

# 모델 라우팅 규칙(요약)

## 1) 기본 맵
1) **아주 짧고 단순한 질의**  
   → **Groq 8B** (속도 최우선)

2) **복잡 키워드 1개 이상** *(근거/출처/조항/정책/법/요약/비교/분석/why/explain/evidence 등)*  
   **또는** 전체 길이 **> 120자**  
   → **OpenAI (gpt-4o-mini)**

3) **초장문/고난도**  
   - 질의 길이 **≥ 200자** **또는** 컨텍스트 길이 **> 1000자**  
   - 복잡 키워드 **2개 이상** 또는 초장문 정규식 매칭  
   → **Groq 업스케일(70B)**  
   (단, `GROQ_MODEL_UPSCALE`이 8B로 설정된 경우 → **OpenAI**로 대체)

4) 그 외 일반 질의  
   → **Groq 8B**

## 2) 환경 변수(토글)
- `GROQ_MODEL_UPSCALE=llama-3.1-70b-versatile` (권장)  
  - 8B로 지정하면 업스케일 **비활성** 취급 → 1)·2) 규칙만 적용
- `REPLY_MAX_TOKENS=360` : 장문 답변 품질 보정  
- `STOP_TOKENS=출처:,참고:` : 근거 섹션 과생성 방지

## 3) 예시
- “핵심만 두 줄로 요약해줘” → Groq 8B  
- “약관 변경사항 요약 + 근거 조항 표시” → OpenAI  
- “다음 컨텍스트 1500자 기반으로 조항 비교/분석” → Groq 70B 업스케일(또는 OpenAI, 업스케일 비활성 시)

> 실제 구현은 `core/router.py`에 있으며, 위 규칙과 동일하게 동작.
