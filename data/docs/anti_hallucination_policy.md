---
title: 할루시네이션 방지 정책
version: 1.3
last_updated: 2025-10-19
locale: ko-KR
---

# 할루시네이션 방지 정책

## 1) 정책 요지
- **수치·사실은 “검증 가능한 근거”가 있을 때만** 출력
- 근거가 없으면 **구조적 제안**(체크리스트/프로세스/룰)로 대체
- **출처 표기**는 내부 문서명/섹션만, 외부 URL은 화이트리스트에 한해 자동 허용

## 2) 결정 트리
1. **질문에 수치/사실 요구?**  
   - 예: 금액/빈도/퍼센트/날짜 등
2. **근거 존재?** (컨텍스트/RAG/사용자 facts/파생 수치)  
   - 예: `extract_numbers`에 포함된 토큰 실존
3. 존재한다 → **그 수치만** 출력 (정규화 후)  
   존재하지 않는다 → **[수치 생략]** 및 **절차/룰**로 대체
4. **링크 필요?**  
   - 허용 host에만 링크 유지, 아니면 `"[링크 생략]"`

## 3) 출력 규칙 (시스템 연동)
- `sanitize_numbers(answer, allowed)`로 **허용 토큰 외 수치 자동 마스킹**
- URL은 **host 화이트리스트** 외 전부 제거
- 내부 문서 인용 형식: `*문서명.md · 섹션 2*` (링크 없이 텍스트)

## 4) 대체 출력 프레임
근거 부족 시 아래 순서로 답한다.
1. **전제/가정** 1문장 (*사용자 데이터 부족, 평균값 미사용 고지*)
2. **체크리스트** 3~5개
3. **안전 한도/룰** 1~2개 (정성 규칙)
4. **작은 액션 1개** (이번 주)

## 5) 예시
**수치 근거 있음(통과)**  
> 최근 4주 ‘식비’는 **[수치 통과]**이며 배달 빈도가 높습니다.  
> - 평일 점심 한도 유지  
> - 야식 시간 주문 제한  
> 이번 주 액션: *배달앱 알림 OFF*

**수치 근거 없음(대체)**  
> 식비 절감을 위해 몇 가지 절차를 권장합니다.  
> - 평일 점심 **고정 메뉴** 지정  
> - 배달 **최소 주문 금액** 상향  
> - **현금성 포인트** 우선 소진  
> 이번 주 액션: *점심 메뉴 2개만 로테이션*

## 6) 품질 점검 체크리스트
- [ ] 모든 수치가 **허용 토큰 셋**에 포함되는가  
- [ ] 외부 URL이 **허용 host**에 속하는가  
- [ ] 답변 길이가 **간결(요약 + 3~4 불릿)**한가  
- [ ] **이번 주 액션**이 1개 포함되는가
